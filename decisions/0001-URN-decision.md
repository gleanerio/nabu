# 1. Record architecture decisions

Date: 05-01-2023

## Status

Proposed

## Context

As JSON-LD documents, representing data graphs, are collected from sources they
need to be processed in the graph.  When doing this we generate a named graph URN
to identify the set of triples coming from a given document.  

## Decision

****The  desired URN pattern would then look like the following.  
These would likely always be pulled from the summoned prefix, and as such be JSON-LD.  

```rdf
urn:{engine}:{implnet}:{source}:{type}:{sha}
```

* engine:  In our case always _gleaner.io_ to represent the code base used.  Other
  groups may wish to use other packages like apache systems and can denote that here.  
  The value is small, but it does give some evidence to the tools used which my have impact.
* implnet:  The implementing network or organization doing the activity.  This should be 
  one word, lower case and  all alphanumeric.  So things like:  oih, decoder, geocodes, iow, polder, etc.
* source:  The name of the source from the Gleaner configuration file.  It should also be
  one word, lower case and  all alphanumeric.  So things like:  bcodmo, aquadocs, iris, etc.
* type: One of;
    * data:  representing the data graphs collected
    * prov:  representing the prov graphs describing the collection process
    * org:   representing on the organization data graphs generated by Gleaner for a source
* sha:  The sha hash generated.  

Populated examples might look like:

```rdf
urn:gleaner.io:oih:edmo:prov:0255293683036aac2a95a2479cc841189c0ac3f8
or
urn:gleaner.io:iow:counties0:data:00010f9f071c39fcc0ca73eccad7470b675cd8a3 
```


## Consequences

This impacts gleaner in the generation of prov which will need to use this same pattern
to fill out the prov records.  

Also, this means the URN does not actually represent the location of the object.  Rather the 
client must know to go looking in summoned and or milled.  As noted, the use of milled is 
not really compelling.  That aside, it is a case where the URN is now just an identifier and 
does not represent a resolvable object.  
